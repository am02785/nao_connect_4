import naoqiimport threadingimport timeimport math# The movement joints of the right arm# used https://github.com/Angeall/pyConnect4NAO/blob/master/src/nao/controller/motion.pyLEFT_ARM_CHAIN = ["LShoulderPitch", "LShoulderRoll", "LElbowRoll", "LElbowYaw", "LWristYaw"]# The angles of the right arm in radians# used https://github.com/Angeall/pyConnect4NAO/blob/master/src/nao/controller/motion.pyINTERMEDIATE_TOP = [-1.56, 1.22, -0.03, -1.31, -0.44]INTERMEDIATE_BOTTOM = [1.56, 1.22, -0.03, -1.31, -0.44]LEFT_ARM_ALONGSIDE_BODY = [1.62, -0.32, 0.03, 1.31, -0.44]PERPENDICULAR = [-1.56, 1.22, -0.03, -1.31, -0.44]RAISED = [-1.22, 0.05, -0.55, -1.29, -0.77]HEAD_SENSOR_MODULE_NAME = "HeadSensor"ip_address = "192.168.43.43"port = 9559broker = naoqi.ALBroker("myBroker", "0.0.0.0", 0, ip_address, port)motion = naoqi.ALProxy("ALMotion")motion.setStiffnesses("Body", 1.0)memory = naoqi.ALProxy("ALMemory")head_touched = threading.Event()# A callback module which reacts to head touched events# used https://github.com/Angeall/pyConnect4NAO/blob/master/src/connect4nao.pyclass HeadSensor(naoqi.ALModule):    def __init__(self):        self.__module_name = "HeadSensor"        naoqi.ALModule.__init__(self, self.__module_name)    # called when the head has been touched    # used https://github.com/Angeall/pyConnect4NAO/blob/master/src/connect4nao.py    def headTouched(self):        memory.unsubscribeToEvent("FrontTactilTouched", HEAD_SENSOR_MODULE_NAME)        memory.unsubscribeToEvent("MiddleTactilTouched", HEAD_SENSOR_MODULE_NAME)        memory.unsubscribeToEvent("RearTactilTouched", HEAD_SENSOR_MODULE_NAME)        head_touched.set()head_sensor = HeadSensor()# moves the right arm perpendicular to the body# used https://github.com/Angeall/pyConnect4NAO/blob/master/src/nao/controller/motion.pydef set_left_arm_perpendicular_to_body():    motion.angleInterpolation(LEFT_ARM_CHAIN, PERPENDICULAR, 2., True)# moves the right arm alongside body# used https://github.com/Angeall/pyConnect4NAO/blob/master/src/nao/controller/motion.pydef set_left_arm_alongside_body():    motion.angleInterpolation(LEFT_ARM_CHAIN, INTERMEDIATE_TOP, 2., True)    motion.angleInterpolation(LEFT_ARM_CHAIN, INTERMEDIATE_BOTTOM, 2., True)    motion.angleInterpolation(LEFT_ARM_CHAIN, LEFT_ARM_ALONGSIDE_BODY, 2., True)# Raises the right arm# used https://github.com/Angeall/pyConnect4NAO/blob/master/src/nao/controller/motion.pydef set_left_arm_raised():    motion.angleInterpolation(LEFT_ARM_CHAIN, INTERMEDIATE_BOTTOM, 2., True)    motion.angleInterpolation(LEFT_ARM_CHAIN, INTERMEDIATE_TOP, 2., True)    motion.angleInterpolation(LEFT_ARM_CHAIN, RAISED, 2., True)# Closes the right hand in the right arm and then raises it# used https://github.com/Angeall/pyConnect4NAO/blob/master/src/nao/controller/motion.pydef raise_left_arm():    motion.angleInterpolation(LEFT_ARM_CHAIN, INTERMEDIATE_BOTTOM, 2., True)    motion.angleInterpolation(LEFT_ARM_CHAIN, INTERMEDIATE_TOP, 2., True)    motion.angleInterpolation(LEFT_ARM_CHAIN, RAISED, 2., True)def lower_left_arm():    motion.closeHand("LHand")    motion.angleInterpolation(LEFT_ARM_CHAIN, RAISED, 2., True)    motion.angleInterpolation(LEFT_ARM_CHAIN, INTERMEDIATE_TOP, 2., True)    motion.angleInterpolation(LEFT_ARM_CHAIN, INTERMEDIATE_BOTTOM, 2., True)# Makes the nao robot walk to the grid, drop the counter in# grid, and then walk back to its initial position# https://github.com/Angeall/pyConnect4NAO/blob/master/src/nao/controller/motion.pydef drop_counter_in_grid(hole_number):    motion.closeHand("LHand")    #id = motion.post.moveTo(0, (hole_number-4)*0.01, 0)    raise_left_arm()    set_left_arm_perpendicular_to_body()    motion.openHand("LHand")    motion.closeHand("LHand")    lower_left_arm()    #close_and_raise_left_arm()    #set_right_arm_alongside_body()    #id = motion.post.moveTo(0, -((hole_number-4)*0.01), 0)# Waits for the player to put a counter in# the right handdef wait_for_counter(hole_number):    memory.subscribeToEvent("FrontTactilTouched", HEAD_SENSOR_MODULE_NAME, "headTouched")    memory.subscribeToEvent("MiddleTactilTouched", HEAD_SENSOR_MODULE_NAME, "headTouched")    memory.subscribeToEvent("RearTactilTouched", HEAD_SENSOR_MODULE_NAME, "headTouched")    motion.openHand("LHand")    head_touched.wait(10)    drop_counter_in_grid(hole_number)    head_touched.clear()